
<!doctype html>
<html lang="en">

<head> 
<script src="/js/skipto.min.js"></script>
<script> var SkipToConfig =  { 'settings': { 'skipTo': { displayOption: 'popup' } } }; </script>

  <link rel="stylesheet" href="/css/edthedev.css" /> 
  <link rel="stylesheet" href="/css/art.css" /> 
  <title>A Fractal at Sunset - 2023 September 22</title>
  <script src="/js/p5.js"></script>
  
    <script src="/js/art/share/canvas.js"></script>
  
    <script src="/js/art/share/random.js"></script>
  
    <script src="/js/art/share/horizon.js"></script>
  
    <script src="/js/art/share/draw_kit.js"></script>
  
    <script src="/js/art/fractal_sunset.js"></script>
  

</head> 
<body>

<nav class="ye_navbar" role="navigation"> 
<ul><li><a href="/">Edward.Delaporte.us</a></li>
<li><a href="/slides/">Slides</a></li>
<li><a href="/code/">Code</a></li>
<li><a href="/art/">Art</a></li>
<li><a href="/blog/">Blog</a></li>
<li><a href="/resume/">Resume</a></li></ul>
</nav>


<div class="content" role="main"> <!-- No role="main" here because the script will add a main tag. -->
<h1> A Fractal at Sunset - 2023 September 22 </h1>
<p>Click on the art piece to randomize it, or save the current URL to share it.</p>

<main role="application"> <!-- Script output will be written here. -->
</main>

</div>
<div class="content" role="contentinfo">
<p>Edward Delaporte created this art using the <a href="https://p5js.org/">P5.js</a> JavaScript library, and the following additional code:
</p>
  
    <h2><a href='/js/art/share/canvas.js'>js/art/share/canvas.js</a>:</h2>

<pre>
brickwall
function setup_canvas(maxim_x=800, maxim_y=400) {
  midline = maxim_x / 2;

  myCanvas = createCanvas(maxim_x, maxim_y);

}

function zippy() {
  /// Dark Striped Background
  noStroke();
  stripe_w = 60;
  for(i=0; i&amp;lt400; i++) {
    fill(fresh_color(.3)); // darker fill color
    x = i * stripe_w;
    // triangle(x, y, x+30, y-random(80), x, y+i+30);
    rect(x,0, stripe_w, 400);
  }
}

function setup_background_circles(centerx, max_diam){
  xo = centerx;
  yo = centerx;
  for(var i=0; i&amp;lt9; i++){
    ccolor = fresh_color();
    diam = max_diam -i*20;
    fill(ccolor);
    circle(xo, yo, diam);
  }
}

function starfield(max_x, max_y, star_size=4) {
  // white stars
  noStroke();
  fill(color(255,255,255));
  
  // Randomly scatter stars.
  starcount = random(20,60);
  for(i=0;i&amp;ltstarcount;i++){
    starx = random(0, max_x);
    stary = random(0, max_y);
    circle(starx, stary, star_size);
    if(random(0,5)==1) {
      circle(starx -4, stary -4, star_size);
    }

  }
}
</pre>
  
    <h2><a href='/js/art/share/random.js'>js/art/share/random.js</a>:</h2>

<pre>
/* 

Reusable random functions

*/

function rando_url(){
  if(get_url_seed() == null) {
    new_random(Date.now());
  }
}

function random_plus_minus(low, high){
  // Return a random number with a random sign
  var plus_minus = Math.random() &amp;lt 0.5 ? -1 : 1;
  var sel_val = low + Math.random()*(high-low);
  return sel_val * plus_minus;
}

function new_random(seed=null) {
  seed = get_random_seed(seed);
  window.location.search = &quot;?r=&quot; + seed;
}

function get_url_seed() {
  const params = new URLSearchParams(location.search);
  seed = params.get(&#39;r&#39;);
  return seed;
}

function get_random_between(low, high, seed) {
  if(!seed) {
    seed = get_url_seed();
  }
  return low + get_random_from_seed(seed, high);
}

function get_random_seed(seed=200) {

  rand = Math.random();
  rand = Math.sin(seed) * 10000;
  seed = rand - Math.floor(rand);
  return seed;
}

function get_random_from_seed(seed, max_r=1) {
    rand = Math.sin(seed) * 10000;
    rand = rand - Math.floor(rand); // Get remainder
    return Math.floor(rand * max_r);
}

var color_shift = 0;
function fresh_color(warmth=.7, seed) {
  if(!seed) {
    seed = get_url_seed();
    color_shift+=1;
    seed = seed^color_shift;
  }
  r1 = get_random_from_seed(seed, 255);
  r2 = get_random_from_seed(seed*r1, 255);
  r3 = get_random_from_seed(seed*r2, 255);
  return color(r1*warmth,r2*warmth,r3*warmth);
}


function fresher_color(warmth=.7, seed) {
  if(!seed) {
    seed = get_url_seed();
    color_shift+=1;
    seed = seed^color_shift;
  }
  r1 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  r2 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  r3 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  return color(r1*warmth,r2*warmth,r3*warmth);
}



function remove_item(choices, item) {
  index = choices.indexOf(item);
  if (index &amp;gt -1) { 
    choices.splice(index, 1); 
  }
  return choices;
}

function choose(choices, seed) {
  // Support repeatable result.
  // so that every frame of animation re-uses the 
  // same choice as last.
  if(!seed) {
    seed = get_url_seed();
  }
  index = get_random_from_seed(seed, choices.length);
  return choices[index];
}
</pre>
  
    <h2><a href='/js/art/share/horizon.js'>js/art/share/horizon.js</a>:</h2>

<pre>
/*

&quot;Horizon&quot; is part of a Live Art work created by Edward Delaporte.

This script is Copyright Edward Delaporte 2021.

This script and the art it creates are licensed under 
a Creative Commons Attribution-ShareAlike 4.0 
International License.

http://creativecommons.org/licenses/by-sa/4.0/

You can share your own remix of this code 
as long as you display this license and attribution.

*/

var stripecount = 0;
var stripecolors = [];

function make_horizon(
  frame_minx, 
  frame_miny,
  frame_maxx,
  frame_maxy
) {

  var c = color(random(100,200),random(80,160), random(0,200));
  fill(c);

  stripecount = random(4,7);
  stripecolors = [];
  var stripefade = 20;
  var stripered = random(140, 200);
  var stripegreen = random(20, 100);
  var stripeblue = random(0, 200);
  for(i=0;i&amp;ltstripecount;i++){
    c = color(stripered+i*stripefade,stripegreen+i*stripefade, stripeblue);
    stripecolors.push(c);
  }

  sund = random(30,50);
  sunx = random(frame_minx + sund, frame_maxx - sund);
  suny = random(frame_miny + sund, frame_maxy/2 - sund);
}

function draw_horizon(
  frame_minx, 
  frame_miny,
  frame_maxx,
  frame_maxy
  ) {

  fill(color(230,230,230));
  rect(frame_minx, frame_miny, 
    frame_maxx-frame_minx,
    frame_maxy-frame_miny);

  noStroke();
  var horiz_stripe_y;
  for(i=0;i&amp;ltstripecount-1;i++){
    fill(stripecolors[i]);
    horiz_stripe_y = frame_miny + i*(frame_maxy/stripecount);
    rect(frame_minx, horiz_stripe_y, 
      frame_maxx - frame_minx, 
      frame_maxy - horiz_stripe_y - frame_miny);
  }

  // sun
  noStroke();
  fill(color(255,255,100));
  circle(sunx, suny, sund);
}
</pre>
  
    <h2><a href='/js/art/share/draw_kit.js'>js/art/share/draw_kit.js</a>:</h2>

<pre>


function toRadians (angle) {
  return angle * (Math.PI / 180);
}

function add_degrees(angle, degrees) {
  updated = angle + degrees;
  if(updated &amp;gt 360) {
    updated = updated - 360;
  }
  return updated;
}

var line_segment = {
  x: 0,
  y: 0,
  weight: 4,
  degrees: 0,
  length: 20,
  history: 0,
  color: null,
  color_seq: [],
};

function draw_line_segment(line_seg, hide=0) {
  seg = structuredClone(line_seg);
  seg.history+=1;
  // stroke(seg.color.red, seg.color.green, seg.color.blue);
  strokeWeight(seg.weight);
  angleRad = toRadians(seg.degrees);
  endx = seg.x + seg.length*Math.cos(angleRad);
  endy = seg.y + seg.length*Math.sin(angleRad);
  if(hide==0) {
    line(seg.x, seg.y, endx, endy);
  }
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
}

function draw_line_cross(line_seg, dx, dy, hide=0) {
  seg = structuredClone(line_seg);
  seg.history+=1;
  strokeWeight(seg.weight);
  angleRad = toRadians(seg.degrees + 90);
  endx = seg.x + .5*seg.length*Math.cos(angleRad);
  endy = seg.y + .5*seg.length*Math.sin(angleRad);
  startx = seg.x - .5*seg.length*Math.cos(angleRad);
  starty = seg.y - .5*seg.length*Math.sin(angleRad);
  if(hide==0) line(startx+dx, starty+dy, 
    endx+dx, endy+dy);
  /*
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
  */
}



function draw_line_with_kite_shadow(line_seg, color_seq) {

  // prep
  seg = structuredClone(line_seg);
  angleRad = toRadians(seg.degrees);
  endx = seg.x + seg.length*Math.cos(angleRad);
  endy = seg.y + seg.length*Math.sin(angleRad);

  if(line_seg.history &amp;gt 0) { // skip first line

  // draw shadow
  shadow_idx = (seg.history % color_seq.length);
  sha_c = color_seq[shadow_idx];
  stroke(sha_c.red, sha_c.green, sha_c.blue);
  fill(sha_c);
  swe = seg.weight*16;
  quad(
    seg.x,seg.y, 
    seg.x+swe,seg.y+swe, 
    endx,endy,
    endx+swe,endy+swe
    );

  // draw line
  stroke(seg.color.red, seg.color.green, seg.color.blue);
  strokeWeight(seg.weight);
  line(seg.x, seg.y, endx, endy);

  } else {
    endx = seg.x;
    endy = seg.y;
  }

  // house keeping
  seg.history+=1;
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
}


function new_line_segment(color_seq) {
  seg = structuredClone(line_segment);
  seg.color_seq = color_seq;
  seg.color = seg.color_seq[0];
  return seg;
}
</pre>
  
    <h2><a href='/js/art/fractal_sunset.js'>js/art/fractal_sunset.js</a>:</h2>

<pre>
/*

This is a Live Art work created by Edward Delaporte.

This script is Copyright Edward Delaporte 2021.

This script and the art it creates are licensed under 
a Creative Commons Attribution-ShareAlike 4.0 
International License.

http://creativecommons.org/licenses/by-sa/4.0/

You can share your own remix of this code 
as long as you display this license and attribution.

*/

var color_seq = [];

function start_fractal() {
  stroke(0,0,0);
  line_bit = new_line_segment([color(0,0,0)]);
  line_bit.length = 100;
  line_bit.x = 300;
  line_bit.y = 200;
  line_bit.degrees = random_plus_minus(30, 80); 
  roty = random(30, 72);
  an_count = 365 / roty;

  color_seq = [
    color(230,85,85),
    color(85,230,85),
    color(85,85,230),
  ];
  do_fractal(line_bit);
  for(i=0; i&amp;ltan_count; i++) {
    line_bit.degrees += roty; 
    do_fractal(line_bit);
  }
}

var pri_angle = random_plus_minus(30, 60);
var sec_angle = random_plus_minus(45, 90);

async function do_fractal(bit) {
  const next_bit = structuredClone(
    draw_line_with_shadow(bit, color_seq));

  next_bit.length = next_bit.length*.67;
  next_bit.weight = next_bit.weight*.8;
  next_bit.degrees = add_degrees(bit.degrees, pri_angle);

  if(next_bit.length &amp;gt 1) {

    await do_fractal(next_bit);
    const bit2 = structuredClone(next_bit);
    bit2.degrees = add_degrees(bit.degrees, sec_angle);
    await do_fractal(bit2);

  }
}

function setup() {
  // maxim = .5 * window.innderWidth;
  rando_url();
  maxim_x = 600;
  maxim_y = 400;
  midline = maxim_y / 2;
  myCanvas = createCanvas(maxim_x, maxim_y);

  /*
  background(0, 
    120+random_plus_minus(30,60), 
    150+random_plus_minus(30,60));
  */
  make_horizon(0,0,600,400);
  draw_horizon(0,0,600,400);
  start_fractal();
  console.log(&quot;setup done&quot;);
}

function mouseClicked() {
  new_random(get_url_seed());
}

function draw_line_with_shadow(line_seg, color_seq) {

  // prep
  seg = structuredClone(line_seg);
  angleRad = toRadians(seg.degrees);
  endx = seg.x + seg.length*Math.cos(angleRad);
  endy = seg.y + seg.length*Math.sin(angleRad);

  // draw shadow
  shadow_idx = (seg.history % color_seq.length);
  sha_c = color_seq[shadow_idx];
  ///stroke(sha_c.red, sha_c.green, sha_c.blue);
  noStroke();
  fill(sha_c);
  swe = seg.weight*4;
  quad(
    seg.x,seg.y, 
    endx,endy,
    endx+swe,endy+swe,
    seg.x+swe,seg.y+swe, 
    );

  // draw line
  stroke(seg.color.red, seg.color.green, seg.color.blue);
  strokeWeight(seg.weight);
  line(seg.x, seg.y, endx, endy);

  // house keeping
  seg.history+=1;
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
}

</pre>
  
</div>

<div class="content" role="contentinfo">
  <a href="https://edward.delaporte.us/slides/share.html#text=A Fractal at Sunset - 2023 September 22%20-%20https://edward.delaporte.us/art/live/fractal_sunset/ ">Share on Mastodon</a>
  <p>
  This work ©2020-2025 by Edward Delaporte is licensed under 
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1">CC BY-NC-SA 4.0</a>
  </p>
</div>
<div style="display: flex; gap: 0.25rem; justify-content: center">
   <p>Click the links below to explore the <a href="https://www.webringworld.org/">web ring</a> I joined.</p>
  <a href="https://graphics-programming.org/webring/frogs/edthedev/prev">⬅️</a>
  <a href="https://graphics-programming.org/webring/">
    <img
      src="https://graphics-programming.org/img/froge.webp"
      alt="a friendly froge"
      style="object-fit: contain; width: 1.5em; height: 1.5em"
    />
  </a>
  <a href="https://graphics-programming.org/webring/frogs/edthedev/next">➡️</a>
</div>

</html>
