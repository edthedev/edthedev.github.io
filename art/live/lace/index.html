
<!doctype html>
<html lang="en">

<head> 
<script src="/js/skipto.min.js"></script>
<script> var SkipToConfig =  { 'settings': { 'skipTo': { displayOption: 'popup' } } }; </script>

  <link rel="stylesheet" href="/css/edthedev.css" /> 
  <link rel="stylesheet" href="/css/art.css" /> 
  <title>Lace - 2023 September 27</title>
  <script src="/js/p5.js"></script>
  
    <script src="/js/art/share/canvas.js"></script>
  
    <script src="/js/art/share/random.js"></script>
  
    <script src="/js/art/share/ani.js"></script>
  
    <script src="/js/art/share/draw_kit.js"></script>
  
    <script src="/js/art/lace.js"></script>
  

</head> 
<body>

<nav class="ye_navbar" role="navigation"> 
<ul><li><a href="/">Edward.Delaporte.us</a></li>
<li><a href="/slides/">Slides</a></li>
<li><a href="/code/">Code</a></li>
<li><a href="/art/">Art</a></li>
<li><a href="/blog/">Blog</a></li>
<li><a href="/resume/">Resume</a></li></ul>
</nav>


<div class="content" role="main"> <!-- No role="main" here because the script will add a main tag. -->
<h1> Lace - 2023 September 27 </h1>

<main role="application"> <!-- Script output will be written here. -->
</main>

</div>
<div class="content" role="contentinfo">
<p>Edward Delaporte created this art using the <a href="https://p5js.org/">P5.js</a> JavaScript library, and the following additional code:
</p>
  
    <h2><a href='/js/art/share/canvas.js'>js/art/share/canvas.js</a>:</h2>

<pre>
brickwall
function setup_canvas(maxim_x=800, maxim_y=400) {
  midline = maxim_x / 2;

  myCanvas = createCanvas(maxim_x, maxim_y);

}

function zippy() {
  /// Dark Striped Background
  noStroke();
  stripe_w = 60;
  for(i=0; i&amp;lt400; i++) {
    fill(fresh_color(.3)); // darker fill color
    x = i * stripe_w;
    // triangle(x, y, x+30, y-random(80), x, y+i+30);
    rect(x,0, stripe_w, 400);
  }
}

function setup_background_circles(centerx, max_diam){
  xo = centerx;
  yo = centerx;
  for(var i=0; i&amp;lt9; i++){
    ccolor = fresh_color();
    diam = max_diam -i*20;
    fill(ccolor);
    circle(xo, yo, diam);
  }
}

function starfield(max_x, max_y, star_size=4) {
  // white stars
  noStroke();
  fill(color(255,255,255));
  
  // Randomly scatter stars.
  starcount = random(20,60);
  for(i=0;i&amp;ltstarcount;i++){
    starx = random(0, max_x);
    stary = random(0, max_y);
    circle(starx, stary, star_size);
    if(random(0,5)==1) {
      circle(starx -4, stary -4, star_size);
    }

  }
}
</pre>
  
    <h2><a href='/js/art/share/random.js'>js/art/share/random.js</a>:</h2>

<pre>
/* 

Reusable random functions

*/

function rando_url(){
  if(get_url_seed() == null) {
    new_random(Date.now());
  }
}

function random_plus_minus(low, high){
  // Return a random number with a random sign
  var plus_minus = Math.random() &amp;lt 0.5 ? -1 : 1;
  var sel_val = low + Math.random()*(high-low);
  return sel_val * plus_minus;
}

function new_random(seed=null) {
  seed = get_random_seed(seed);
  window.location.search = &quot;?r=&quot; + seed;
}

function get_url_seed() {
  const params = new URLSearchParams(location.search);
  seed = params.get(&#39;r&#39;);
  return seed;
}

function get_random_between(low, high, seed) {
  if(!seed) {
    seed = get_url_seed();
  }
  return low + get_random_from_seed(seed, high);
}

function get_random_seed(seed=200) {

  rand = Math.random();
  rand = Math.sin(seed) * 10000;
  seed = rand - Math.floor(rand);
  return seed;
}

function get_random_from_seed(seed, max_r=1) {
    rand = Math.sin(seed) * 10000;
    rand = rand - Math.floor(rand); // Get remainder
    return Math.floor(rand * max_r);
}

var color_shift = 0;
function fresh_color(warmth=.7, seed) {
  if(!seed) {
    seed = get_url_seed();
    color_shift+=1;
    seed = seed^color_shift;
  }
  r1 = get_random_from_seed(seed, 255);
  r2 = get_random_from_seed(seed*r1, 255);
  r3 = get_random_from_seed(seed*r2, 255);
  return color(r1*warmth,r2*warmth,r3*warmth);
}


function fresher_color(warmth=.7, seed) {
  if(!seed) {
    seed = get_url_seed();
    color_shift+=1;
    seed = seed^color_shift;
  }
  r1 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  r2 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  r3 = 85 + get_random_from_seed(seed^color_shift, 170);
  color_shift+=random();
  return color(r1*warmth,r2*warmth,r3*warmth);
}



function remove_item(choices, item) {
  index = choices.indexOf(item);
  if (index &amp;gt -1) { 
    choices.splice(index, 1); 
  }
  return choices;
}

function choose(choices, seed) {
  // Support repeatable result.
  // so that every frame of animation re-uses the 
  // same choice as last.
  if(!seed) {
    seed = get_url_seed();
  }
  index = get_random_from_seed(seed, choices.length);
  return choices[index];
}
</pre>
  
    <h2><a href='/js/art/share/ani.js'>js/art/share/ani.js</a>:</h2>

<pre>

let ani_stack = [];
let ani_stack_max = 30;

// Called to add a planned animation.
// item should be a function that adds calls for it&#39;s future steps via ani_setup
/*
Example:
        ani_plan( 
          item = 
          function() { 
            branch(x+wi, y-ta, nle, we*4/5, wi2, ta, pulse);
          }
        );

*/
function ani_setup(item) {
  if(ani_stack.length &amp;lt ani_stack_max) {
    ani_stack.push(item);
  }
  // console.debug(ani_stack.length);
}

// Called at the start of setup
function ani_clear() {
  while(ani_stack.length &amp;gt 0) {
    ani_stack.pop();
  }
}

// Call during draw
function ani_draw() {
  ani_speed = 4;
  for(ani_i = 0; ani_i &amp;lt ani_speed; ani_i++) {
    if(ani_stack.length &amp;gt 0) {
      anim = ani_stack.pop();
      anim();
    }
  }
}
</pre>
  
    <h2><a href='/js/art/share/draw_kit.js'>js/art/share/draw_kit.js</a>:</h2>

<pre>


function toRadians (angle) {
  return angle * (Math.PI / 180);
}

function add_degrees(angle, degrees) {
  updated = angle + degrees;
  if(updated &amp;gt 360) {
    updated = updated - 360;
  }
  return updated;
}

var line_segment = {
  x: 0,
  y: 0,
  weight: 4,
  degrees: 0,
  length: 20,
  history: 0,
  color: null,
  color_seq: [],
};

function draw_line_segment(line_seg, hide=0) {
  seg = structuredClone(line_seg);
  seg.history+=1;
  // stroke(seg.color.red, seg.color.green, seg.color.blue);
  strokeWeight(seg.weight);
  angleRad = toRadians(seg.degrees);
  endx = seg.x + seg.length*Math.cos(angleRad);
  endy = seg.y + seg.length*Math.sin(angleRad);
  if(hide==0) {
    line(seg.x, seg.y, endx, endy);
  }
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
}

function draw_line_cross(line_seg, dx, dy, hide=0) {
  seg = structuredClone(line_seg);
  seg.history+=1;
  strokeWeight(seg.weight);
  angleRad = toRadians(seg.degrees + 90);
  endx = seg.x + .5*seg.length*Math.cos(angleRad);
  endy = seg.y + .5*seg.length*Math.sin(angleRad);
  startx = seg.x - .5*seg.length*Math.cos(angleRad);
  starty = seg.y - .5*seg.length*Math.sin(angleRad);
  if(hide==0) line(startx+dx, starty+dy, 
    endx+dx, endy+dy);
  /*
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
  */
}



function draw_line_with_kite_shadow(line_seg, color_seq) {

  // prep
  seg = structuredClone(line_seg);
  angleRad = toRadians(seg.degrees);
  endx = seg.x + seg.length*Math.cos(angleRad);
  endy = seg.y + seg.length*Math.sin(angleRad);

  if(line_seg.history &amp;gt 0) { // skip first line

  // draw shadow
  shadow_idx = (seg.history % color_seq.length);
  sha_c = color_seq[shadow_idx];
  stroke(sha_c.red, sha_c.green, sha_c.blue);
  fill(sha_c);
  swe = seg.weight*16;
  quad(
    seg.x,seg.y, 
    seg.x+swe,seg.y+swe, 
    endx,endy,
    endx+swe,endy+swe
    );

  // draw line
  stroke(seg.color.red, seg.color.green, seg.color.blue);
  strokeWeight(seg.weight);
  line(seg.x, seg.y, endx, endy);

  } else {
    endx = seg.x;
    endy = seg.y;
  }

  // house keeping
  seg.history+=1;
  next_seg = structuredClone(seg);
  next_seg.x = endx;
  next_seg.y = endy;
  return next_seg;
}


function new_line_segment(color_seq) {
  seg = structuredClone(line_segment);
  seg.color_seq = color_seq;
  seg.color = seg.color_seq[0];
  return seg;
}
</pre>
  
    <h2><a href='/js/art/lace.js'>js/art/lace.js</a>:</h2>

<pre>
/*

This is a Live Art work created by Edward Delaporte.

This script is Copyright Edward Delaporte 2021.

This script and the art it creates are licensed under 
a Creative Commons Attribution-ShareAlike 4.0 
International License.

http://creativecommons.org/licenses/by-sa/4.0/

You can share your own remix of this code 
as long as you display this license and attribution.

*/

var color_seq = [];

function start_fractal(color_seq) {
  line_bit = new_line_segment(color_seq);
  line_bit.y = 250;
  line_bit.length = 90;
  line_bit.x = 300;
  line_bit.degrees = 0; 
  roty = 52;
  do_fractal(line_bit);
  line_bit.degrees+=roty;
  do_fractal(line_bit);
  line_bit.degrees+=roty;
  do_fractal(line_bit);
  line_bit.degrees+=roty;
  do_fractal(line_bit);
  line_bit.degrees+=roty;
  do_fractal(line_bit);
}

var first_angle = get_random_between(30, 120);
console.log(&quot;1:&quot; + first_angle);
var second_angle = get_random_between(45, 60);
console.log(&quot;2:&quot; + second_angle);

async function do_fractal(bit) {
  if(bit.history == 3) {
    bit.color = bit.color_seq[1];
  }
  if(bit.history == 6) {
    bit.color = bit.color_seq[2];
  }
  if(bit.history == 9) {
    bit.color = bit.color_seq[3];
  }
   stroke(bit.color.levels[0],
          bit.color.levels[1],
          bit.color.levels[2]);

  hide=0;
  if(bit.history&amp;lt3) {
    hide=1;
  }
  const next_bit = structuredClone(draw_line_segment(bit, hide));
  for(i=3; i&amp;lt5; i+=bit.weight*2){
    draw_line_cross(bit, i, i, hide);
  }

  next_bit.length = next_bit.length*.67;
  next_bit.weight = next_bit.weight*.67;
  next_bit.degrees = add_degrees(bit.degrees, first_angle);

  if(next_bit.length &amp;gt 4) {

    ani_setup( 
        item = function() { 
          do_fractal(next_bit);
          const bit2 = structuredClone(next_bit);
          bit2.degrees = add_degrees(bit.degrees, second_angle);
          do_fractal(bit2);
          /*
          if(second_angle &amp;lt 60) {
            const bit3 = structuredClone(next_bit);
            bit3.degrees = add_degrees(bit.degrees, second_angle*2);
            do_fractal(bit3);
          }
          */
        }
    );

  }
}

function setup() {
  rando_url();
  ani_clear();

  color_seq = [
    color(0,60,60),
    color(7,44,63),
    color(24,101,142),
    color(11,156,234),
  ];

  second_angle = random_plus_minus(30, 140);
  maxim_x = 600;
  maxim_y = 500;
  midline = maxim_y / 2;
  myCanvas = createCanvas(maxim_x, maxim_y);
  myCanvas = createCanvas(maxim_x, maxim_y);
  fill(240,240,240);
  circle(maxim_x/2, maxim_y/2, maxim_y*.8);
  fill(255,255,255);
  circle(maxim_x/2, maxim_y/2, maxim_y*.7);
  start_fractal(color_seq);
  console.log(&quot;setup done&quot;);
}

function mouseClicked() {
  new_random(get_url_seed());
}


function draw() {
  ani_draw();
}
</pre>
  
</div>

<div class="content" role="contentinfo">
  <a href="https://edward.delaporte.us/slides/share.html#text=Lace - 2023 September 27%20-%20https://edward.delaporte.us/art/live/lace/ ">Share on Mastodon</a>
  <p>
  This work ©2020-2025 by Edward Delaporte is licensed under 
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1">CC BY-NC-SA 4.0</a>
  </p>
</div>
<div style="display: flex; gap: 0.25rem; justify-content: center">
   <p>Click the links below to explore the <a href="https://www.webringworld.org/">web ring</a> I joined.</p>
  <a href="https://graphics-programming.org/webring/frogs/edthedev/prev">⬅️</a>
  <a href="https://graphics-programming.org/webring/">
    <img
      src="https://graphics-programming.org/img/froge.webp"
      alt="a friendly froge"
      style="object-fit: contain; width: 1.5em; height: 1.5em"
    />
  </a>
  <a href="https://graphics-programming.org/webring/frogs/edthedev/next">➡️</a>
</div>

</html>
