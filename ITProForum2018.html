<!DOCTYPE html>
<html>
  <head>
    <title>Securing cPanel</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
	  .remark-slide, .remark-slide-container {
		  background-image: url("static/img/webcon2016/slidesidebar.jpg");
	  }
    /*
	  .remark-slide-content {
		  background-image: url("static/img/webcon2016/slidebg.jpg");
	  }*/
	  img {
		  float:right;
		  border-radius:22px;
	  }
	  img.left {
		  float:left;
	  }
	  img.little {
		  height:200px;
	  }
	  img.capture {
		  border-radius:1px;
	  }
	  img.stretch {
		  width:45%;
		  padding: 10px;
	  }
	  img.flow{
		  width: 100%;
		  padding: 10px;
		  background-color: white;
	  }
    </style>
  </head>
  <body>


<textarea id="source">

# Securing cPanel 

.small[
Presented by [Edward Delaporte](mailto:edward.delaporte@busey.com)

for [Busey Bank](https://www.busey.com)

at [University of Illinois IT Professionals Forum](https://www.itproforum.illinois.edu/) on June 14, 2018.
]

This slide deck is online at http://edward.delaporte.us

???

TODO: Grab screenshots of resource websites.

Edward
- I am a web server security expert.
- Upfront: I am no longer a cPanel expert. The product has advanced a lot since I last used it.
- Writing Web Application Solutions since 2000.
- Hosting cloud microsites since 2007.
- Worked for Office of Privacy and Information Assurance from around 2007 to 2015.
- I don't speak for Network Security, but I do speak *with* them. :)
- Now work for First Busey Corporation - leading a development team subject to both 
- Payment Card Industry
- Financial Sector Regulations

Why I care
- This is my Alma mater: Graduated with Degree in Comp Sci from College of Enginering in 06
- You're part of my brand.
- We (successful IT professionals) need to pay it forward to the next students 

Why Busey Cares
- The kids you're teaching are our future customers.
- Technology Partnerships
- FirsTech subsidiary - quiet integration partner

Overview: 7ish slides.
2 minutes per slide. 
Works out to 15 minutes?
Want to bump that up to 30 minutes, then leave plenty of time for Q and A.

Disclaimer: My security team is amazing, so my edge may have dulled.

---

# Threats

- Misconfigurations
- Add-Ons
- Comments
- Uploads
- Stale Users

---

# Solutions

- Hosted cPanel
- Disable Unused Features 
- Use Single Sign On
- Apply Checklists 

---

## Misconfiguration

 "The difference from an easy example solution and the best example could be security."

---

## Add-Ons

Vet your add-ons
- License
- Commit History
- Open / Closed Issues
- Number of Forks

---

## Bad Comments

- Spam
- Links to more spam.
- Links to viruses.
- Cross Site Script (XSS) Attacks
  - Steal Passwords
  - Launch Pop-Ups

???

- Watch for innocent looking comment text with link URL to spam.

TODO: Embed Spam short here?

---

## Good Comments

- Are authenticated
- Are moderated
- Or are disabled

---

## Uploads

- Set file size limits.
  - Some of the worst attacks are really big. 
  - Most useful files are small.
- Set file type limits. 
  - Most attacks require unusual file types.
  - Do allow file types you expect.
  - Don't allow any other file types.

---

## Stale Users

- Operating system users
  > lastlog -t 10000 > temp1; lastlog -t 10 > temp2; diff temp1 temp2; rm temp1; rm temp2
- Wordpress logins
- SQL logins
- Drupal logins
- Wiki logins
- Knowledge base logins

For each, you need 
- strong password rules
- discourage password reuse
- enforce periodic password changes
- monitor login activity - not from unexpected part of the world, not robot speed, not brute force guessing passwords...
- clean up stale logins

???

  - Getting Authentication right is hard. Let central IT do it for you. (See Engineering IT FAQ).
  - You don't want to manage users and passwords, if you don't have to.
  - You certaintly don't want to have duplicate passwords and expose them.

---

## Stale Users

***Or***

---

## Stale Users

*use Single Sign On*

???

TODO: Link and screenshot here.

---

- Apply [cPanel Community Recommendations](https://documentation.cpanel.net/display/CKB/Recommended+Security+Settings+Checklist)
and [Basic Security Concepts](https://documentation.cpanel.net/display/CKB/Basic+Security+Concepts)
- Need logins? Use SSO 

--- 

How to Secure SSH:
  https://documentation.cpanel.net/display/CKB/How+to+Secure+SSH
    Suggest as follow-up practice.

Securing cPanel
https://documentation.cpanel.net/display/CKB/Tips+to+Make+Your+Server+More+Secure

Engineering IT CPanel User Guide:
  https://answers.uillinois.edu/illinois.engineering/page.php?id=79074
  And FAQ:
  https://answers.uillinois.edu/illinois.engineering/page.php?id=80857


TODO: Screenshots to grab: 
  - Engineering Answers page
  - cPanel HowTos page

### Intro Self

### Secure your stand alone / or don't run one
### Secure your connections
  - API keys - only put them where they're needed.
  - SQL passwords (don't use sa, do set a long password, don't reuse a password)
### Validate your Plugins
  - Publisher
  - GitHub activity (recent, evidence of patches)
  - Ask an expert (message template)
  - If a plugin doesn't work out of the box, that might be good security. It's a good reason to double-check that there isn't a newer safer plugin.

### Stuff to keep up on
  - Public comments and XSS
  - Who can upload and why not to let them 
  - What file types can be uploaded. Disable exotic stuff.
  - think about your audiences - can students upload files for professors to read, etc.

    Tweak Settings => PHP Settings => Maximum Upload Size

### Be a good neighbor
  - limit file uploads
  - actively moderate, or just disable comments and discussion groups
  - turn off what you're no longer using.
### Use CheckLists

  https://documentation.cpanel.net/display/CKB/Recommended+Security+Settings

  https://documentation.cpanel.net/display/CKB/Recommended+Security+Settings+Checklist

  Basics:
    - https://documentation.cpanel.net/display/CKB/Basic+Security+Concepts

  Basics:
    Authentication methods
    Validated cookies
    Require SSL
    Security tokens
    URL referrer checks
    Password strength

  CPanel Recommended Security Settings Checklist:
  https://documentation.cpanel.net/display/CKB/Recommended+Security+Settings+Checklist
    IMPORTANT: Call attention to "EasyApache Modules to avoid"

## General Principles
  - if you run a chmod command, don't miss.
  - if you install a plug-in, check the GitHub for activity: recent commits, 
## Thoughts on note from Chuck
  - 3rd party apps, plugins
  - must patch
  - please don't roll your own
  - be a good neighbor
## Sound bytes
  - 
## Raw Notes from Chuck

Common cPanel Security Pain Points?

-  The largest number of compromised host events for a single host is on an official campus cPanel instance. This is a very bad title to hold. 
- The biggest issue we had with that was in policy and management. 
- I'm pretty sure they let customers (students and staff) access parts of the admin panel I would govern more, mainly the ability to bring in 3rd party apps, add-ons, and plugins. 
- They also fell behind on patches/updates.
- I do not know if they still allow people full access to spin up instances on their own, but that was a huge issue since the admin had no specific knowledge or expectations on individual configurations.
- Now having said that, cPanel moved over to the enterprise side, and since then Security has received "assurances". 
- We actually haven't seen many issues since, so we're hopeful that it's well managed now. (knock on wood)
I guess the last gap is in visibility- whether we keep controls loose and let folks do a lot (too much?) or not, I think it's important to be acutely aware of the state of things and keep on top of any irregularities. 
- Indeed the most severe incident in the pile threatened to take the entire cPanel instance offline in the middle of the semester, which generated much ado.
Happy to hear that you're talking on this. cPanel is neat, and 
- when it's done right it can help Security by placing a whole host of disparate host instances under common management and policy, 
- in a single managed bucket. 
- But there has to be agreement on everything from purpose to features to limits (and that's really where I think it gets fuzzy).

--- 
# Questions?

- edward.delaporte@busey.com

--- 
<img class='stretch little' src='static/img/gallery/abstract_ipad/11 8-56-49 PM.jpg'/>
<img class='flow' src="static/img/webcon2016/mvc.svg" />
<img class='flow' src="static/img/webcon2016/mvc.svg" />
<img class='flow' src="static/img/webcon2016/mvc.svg" />
<img src='static/img/webcon2016/ratepartial.png' class=''/>
<img class='flow' src="static/img/webcon2016/mvcPartial.svg" />
<img src='static/img/webcon2016/addview.png' class='left'/>
<img src='static/img/webcon2016/addListViewModelPartial.png' class='capture left'/>

---

<img class='stretch left little' src='static/img/gallery/abstract_ipad/11 8-29-50 PM.jpg'/>
<img class='stretch little' src='static/img/gallery/abstract_ipad/11 8-46-35 PM.jpg'/>
<img class='left stretch little' src='static/img/gallery/abstract_ipad/11 8-29-50 PM.jpg'/>
<img class='stretch little' src='static/img/gallery/abstract_ipad/11 8-46-35 PM.jpg'/>

---


???

- You can find this slide deck at Edward.Delaporte.us


</textarea>
    <!--<script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">-->
    <script src="static/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
