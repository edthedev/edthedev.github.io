<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
	  .remark-slide, .remark-slide-container {
		  background-color: blue;
		  background-image: url("static/img/gallery/peaship.jpg");
		  background-image: url("static/img/gallery/peaship.jpg");
	  }
	  .remark-slide-content {
		  background-image: url("static/img/webcon2016/slidebg.jpg");
	  }

	  textarea { 
	  }
    </style>
  </head>
  <body>
<textarea id="source">

# Make Cool Things Quickly 
## with ASP.Net MVC and ReactJs.Net
.small[
Presented by Edward Delaporte and Zach Carrington, Busey Bank

at [University of Illinois WebCon](http://webcon.illinois.edu/) on April 28, 2016.
]

# This presentation is under contruction.

???

# Read Along
- Visit http://edward.delaporte.us/WebCon2016.html
- Press P to see my notes.
- Or just view the source.

Edward
- Writing Professional Web Application Solutions since 2000.
- My Career: ASP, ASP.Net (1), PHP, Perl CGI, Python WSGI, React.js, ASP.Net MVC (4.5).

My relationship with Microsoft
- Basic was my first language.
- Visual Basic is where I learned to love programming.
- Visual Basic 4,5,6 and .Net kick-started my career.
- Microsoft ASP felt like a trap. Too closed. Too limiting.
- Spent 8 years doing Linux LAMP development.
- Spent 9 months doing MVC.

Zach
- IT Professional since 2010.
- When I started, Zach answered all of my "How do I do X in ASP.Net MVC 4.5?" questions for me.
- We hope this presentation will do that for you.
- Core builder of RocketRent.SoonToBeRenamed.com
- Here to answer your questions honestly in case I lie to you.

---

# Why this presentation, why today?
- Microsoft Recently open sourced much of ASP.Net
- React.Js was the newest framework ever, when it released.
- Unobtrusive Validation is amazing.

???


- ASP.Net
    - C# and ASP.Net have always been pretty great. 
    - ASP.Net is now Open Source and runs, in theory, everywhere. 
- React.JS
    - Introduces several valuable patterns to client JavaScript.
    - Integrates well with plain old JavaScript.
    - Spoiler: We just finished removing React.js from our biggest product.
    - We will show you how to get many of the benefits of React.js without using React.js
- Unobtrusive
    - Unobtrusive Validation is the best thing to happen to JavaScript in a while.
    - It deserves to be part of the HTML5 specification.
    - It will work with Ruby on Rails, PHP, Python/Django, Perl CGI, and anything that can serve a website.

---

# Topics
- Terminology
- MVC Examples
- Razor
- React.js 
- Razor again

???
Lessons I learned:
- MVC is great.
- Razor (part of MVC) with React.js is nice.
- Razor without React.js is better.
- Our sweet spot turned out to be using ideas from React.js without using React.js

---

# This presentation will help you:
- Make a Simple CRUD Application Quickly with ASP.Net MVC
- Make a Single Page Application (SPA) Quickly with ASP.Net MVC, jQuery and maybe React.js
- Make a Linux web application using Open Source Microsoft technologies.
- Improve your PHP Web App

???
- One of the fast CRUD - Create/Read/Update/Destroy recipes for MVC.
- We will introduce some techniques used in Single Page Apps.
- In theory, everything you see here will run on an Apache server.
    - Possible follow up presentation: "I built a Microsoft App on Linux: Here's What Didn't Work."
- The last third of this presentation is JavaScript, and will run on any Apache server, even one running PHP.

---
# Quick Poll
- Raise a hand if the term Model View Controller is already familiar to you.

???
- Jargon Disclaimer
 - As I explain some Jargon, I will use more Jargon. 
 - You don't need to recognize every tool or framework I mention to get value from this talk.
 - Think of the passing references to other tools as landmarks
 - Some veterans will find these landmarks valuable for orientation.
 - But ASP.Net MVC is terrific for beginners and veterans.
 - So try not to worry if you do not recognize some 'this tastes like Perl::DBI type references'.

- How many of you know what the Model View Controller Pattern is?
- Why MVC?
 - Software development is hard.
 - Everything in life is easier if you make and keep promises to yourself and your team.

- If needed, do a quick run-down of MVC in general, here.
 - All database connections go through the models.
 - All interface elements go in the views.
 - Most logic goes libraries called only by the controllers.
 - Data from models only reaches views through controllers.
 - Data from views only reaches models through controllers.

---

# Terminology: ASP.Net
- [Active Server Pages](http://www.asp.net/web-pages) 
- Relies on the Microsoft .Net Framework
- [Recently Became Open Source!](https://github.com/aspnet)
- [Start here...](https://github.com/aspnet/home)?

???

# About ASP.Net
- Made by Microsoft
- Much of ASP.Net is Open Source 
-- The Project list is five pages long on GitHub!
- Server side
- ASP code is typically C# or Visual Basic.Net
    - If you don't have a preference, use C# to Avoids mixing ; and non-;

---

# Terminology: Model View Controller
- Web framework for ASP.Net
- [Made by Microsoft](http://www.asp.net/mvc), [Licensed under Apache 2.0 License](https://github.com/aspnet/Mvc/blob/dev/LICENSE.txt)
- MVC is made up of:
 - Models (typically using [Entity Framework](http://www.asp.net/entity-framework))
 - ViewModels (simple class objects)
 - Views (using [Razor](https://github.com/aspnet/Razor))
 - Controllers 

???

# About MVC
- MVC is somewhat new, and pretty great.
- Sometimes MVVC (Model ViewModel View Controller)
- MVC is equivalent to Rails, Django, 
- Microsoft has been incrementally releasing parts of MVC as Open Source (Your Mileage May Vary)
- EF and Razor are open source and on GitHub

---

# Terminology: Model View Controller
- MVC is to Asp.Net as:
 - Ruby to Rails
 - Django to Python
- Razor is to ASP.Net as:
 - ASP Web Forms are to ASP.Net
 - Django Views are to Python
 - Jinja is to Python
 - JSP is to Java
- Entity Framework is to ASP.Net as:
 - dbi is to Perl
 - SQLAlchemy is to Python 
 - DjangoORM is to Python

???
# About Razor
- You need a view rendering engine. Razor is one.
- This presenation is not about Razor
- This presnetation will have Razor code.

# About Entity Framework
- Is an ORM (Object Relational Mapping)
- This presenation is not about Entity Framework
- You do not need an ORM, but they can be nice.
- Allows Code-First or Database-First generation. Make one, generate the other.
- No EF code in these slides.
- EF is cool, but we only have so much time.

---

# Terminology: Single Page Application (SPA)
- Examples: Facebook, Google Maps, Twitter
- Can be Fast
- Can be Slow
- Typically better for mobile than non-SPA
- [Microsoft Resources for SPA](http://www.asp.net/single-page-application)

???


SPA
    - Fast because they only load/reload the content you ask for.
    - Slow (particularly on small processors) 
    -- because they often render data to HTML in using browser instead of at the server.
    - Slow (particularly on devices will small amounts of RAM memory) 
    -- because they often do not benefit from server side caching.
    - Fast because user interactions do not wait on network traffic.
    -- Louie CK says "It's going to SPACE! Could you give it a minute?!"
    - Many apps are more pleasant as SPA
    - not every app should be.
    - There are hybrid approaches.

---


# Terminology: Visual Studio, NuGet
- Visual Studio Professional 2015
- Visual Studio Code
- [NuGet Gallery](https://www.nuget.org/packages)

???

# Visual Studio Professional
- Still pretty great.
- Worth the price

# About Visual Studio Code
- Made by Microsoft
- Free
- Open Source
- Works on Windows, Mac, Linux
- Microsoft's message to Linux developers: We think you will like our stuff.
-- Visual Studio Code Team recently committed to Vim levels of plugin support.
- Totally Hypothetical situation: 
-- You maintain a .Net API to bridge your Linux web apps to your MS Unified communications system.
-- Visual Studio Code and ASP.Net may simplify your development stack in the future.

# About NuGet Gallery
- Package manager for Visual Studio Professional
- .Net Equivalent to
 - CPAN for Perl
 - npm for JavaScript
 - bower for JavaScript
- Integrates with Visual Studio version control (including Git!)
- Provides package management with NuGet
- NuGet is like Bower or NPM


---

# Terminology: [React](https://facebook.github.io/react/)
- Made by Facebook
- [Open Source under BSD License](https://github.com/facebook/react/blob/master/LICENSE)
- [ReactJS.Net](http://reactjs.net/) is available in NuGet Gallery

???

# About React.js
- Client side JavaScript
- Works with any server side technology
- Primarily for writing SPAs
- Is way more sane than Google's Angular.js
- This title could have been Do Cool Things Slowly and Painfully with ASP.Net MVC and Angular.js

# ReactJs.Net 
- NuGet package for ASP.Net
- Includes server side pre-compilation of React client side templates

---

# Code Example Tour as a Stack Trace

1. User does something in the browser.
2. GET or POST Request is sent.
3. RouteConfig.cs decides which controller to pass the request to.
4. PaymentController.cs verifies the request.
4. PaymentController.cs applies business rules.
4. PaymentController.cs fetches data.
4. PaymentController.cs assembles data on a ViewModel.
4. PaymentController.cs passes the ViewModel to it's favorite Razor Template.
4. AddPayment.cshtml renders the data from the ViewModel as HTML

???
- Version using React might use mostly React.js JSX for that last step.
- An SPA might do this several times per page view - getting little bits at a time.
- Keep controllers light by building code logic modules.
- Most code, and unit tests are outside MVC in ordinary modules called by the controller in step 5.

---

# GET Request

```
    Request URL: https://example.com/Payments/Single
    Request Method:GET
    Status Code:200 OK
    Remote Address:10.55.36.184:8080
```

???
- Reminder / Context
- Plain Text
- Returned HTML and status code 200 OK
- Payments/Single

---


# RouteConfig.cs

The MVC template comes with a 'RouteConfig.cs' like this:
.small[
```CSharp
public class RouteConfig {
    public static void RegisterRoutes(RouteCollection routes) {

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
        );

    }
}
```
]

***

.small[
```CSharp
public class PaymentsController : Controller {
    [HttpGet]
    public ActionResult Single() {
        /// ... Omitted ...
    }
}
```
]

???

- URLS are determined by controller class names.
- Great URLs never change.
- Great code changes often.
- Controller class names should not be tied to routes.

---

# RouteConfig.cs

Use this instead:
.small[
```CSharp
public class RouteConfig {
    public static void RegisterRoutes(RouteCollection routes) {

        routes.MapMvcAttributeRoutes();

    }
}
```
]

***
.small[
```CSharp
public class SensibleNameController : Controller {
    [HttpGet]
    [Route("Payments/Single")]
    public ActionResult SensibleName() {
        /// ... Omitted ...
    }
}

```
]
???

- Change controller name without changing URL.
- Better! - Change URL without renaming controller.
- Bonus - Keep your sanity by keeping your routes next to your controllers.

---

# Trivial Controller Method
```
public ActionResult Contact() {
    ViewBag.Message = "Your contact page.";
    return View();
}
```

# Typical Controller Method
```
    [HttpGet]
    [AllowAnonymous]
    [Route("/Property/{id}")]
    public ActionResult FindProperty(int id) {
        PropertyViewModel viewModel = DataService.GetPropertyById(id);
        viewModel.SecretTunnel = LogicModule.GetSecrets(viewModel);
        ViewBag.IsTacoTuesday = LogicModule.IsTacoTuesday();
        return View(viewModel);
    }

```

???
# RouteConfig uses URL and GET vs POST to decide which method to call.
- Attribute also applies authorization decisions.
- This Pattern works for API calls too.
- Do not use the special API controllers, they are going away.

# Tips
- Write a module named DataService to keep your Controller 
 - from knowing too much about your data access layer.

- Notice that data and logic, if needed, go here.
 - Keeping controller code simple makes writing unit tests of your logic easier.

- ViewBag lets you pass data that does not belong in your ViewModel.
 - Whether today is Taco Tuesday has nothing to do with the selected Property Address.


---

# Trivial ViewModel

```CSharp
namespace RateCompareWeb.ViewModels {
public class RateViewModel {
public string Provider { get; set; }
public decimal? Rate { get; set; }
public decimal EstimatedValue { get; set; }
public decimal OurAdvantage { get; set; }
}
}
```

???

- Just a class object with some attributes
- Sometimes use separate ViewModels for Add/Edit/List
- Fields may be input/output or calculated

---

# Typical ViewModel

```CSharp
namespace RateCompareWeb.ViewModels {
public class RateViewModel {
public string Provider { get; set; }

[Display(Name = "Rate")]
public decimal? RateAPY { get; set; }

[Display(Name = "Estimated Value")]
[DataType(DataType.Currency)]
[DisplayFormat(DataFormatString = "{0:C}", ApplyFormatInEditMode = true)]
public decimal EstimatedValue { get; set; }

[Display(Name = "Our Advantage")]
[DataType(DataType.Currency)]
[DisplayFormat(DataFormatString = "{0:C}", ApplyFormatInEditMode = true)]
public decimal OurAdvantage { get; set; }
}
}
```

???

- Attributes customize display (label and data format)
- Attributes apply to all generated views (including add/edit/list)
- Other Attributes (Not Shown) add server or client validation

---

# Typical ViewModel

![Rate Table Parial](static/img/webcon2016/ratepartial.png)

???
- Display Attributes cause labels.

---

# Generate a List Partial

MVC can generate a decent list table from a ViewModel.
![Rate Table Parial](static/img/webcon2016/addview.png)

---

# Generate a List Partial
![Rate Table Parial](static/img/webcon2016/addListViewModelPartial.png)

---

# _PartialTable.cshtml

.small[
```CSharp

@model IEnumerable<RateCompareWeb.ViewModels.RateViewModel>
    @{
    Layout = null;
    }

    <table id="rateTable" class="table table-condensed">
        <tr>
            <th> @Html.DisplayNameFor(model => model.Provider) </th>
            ... More headers ...
        </tr>

        @foreach (var item in Model) {
        <tr class="@( item.IsOurRate ? " our_rate":"")">
            <td> @Html.DisplayFor(modelItem => item.Provider) </td>
            ... More Row Data ...
        </tr>
        }
    </table>

    ```
    ]

    ???

    - This is great. We love it.
    - Layout = null tells Razor not to add header/footer

    ---

    # _PartialTable.cshtml

    ![Rate Table Parial](static/img/webcon2016/ratepartial.png)

    ???

    - We added CSS for Bold first row.

    ---

    # Include _PartialTable.cshtml in another page.

    Assuming the ratepartial is served at /Home/_RateTable, we can embed it in another page with:
    ```Razor
    <div id="rateList">
        @Html.RenderAction("_RateTable", "Home")
    </div>
    ```
    And then refresh it on the client side later with:
    ```JavaScript
    $.ajax({
    url: "/Home/_RateTable"
    method: "GET",
    contentType: 'application/json',
    success: function (data, status, xhr) {
    $("#rateList").html(data);
    }
    });
    ```

    ???

    - id allows jQuery to find it.
    - First part does the server side render.
    - Second part allows client side updates without reloading the entire page.

    ---

    # JavaScript Object Pattern
    ```JavaScript
    var AddressHelper = {
    FormId: "AddressForm",
    ListId: "AddressList",
    add: function() {
    $.post("/api/property", function(data) { $("#" + AddressHelper.ListId).html(data); } )
    },
    setup: function () {
    $("#" + AddressHelper.FormId).on("submit", AddressHelper.add);
    }
    }
    AddressHelper.setup();
    ```

    ???
    - Most JavaScript patterns suck.
    - Globals are bad, except when they are well named, and used only on a page or two.
    - This looks a lot like a React component, but is just a JavaScript object.
    - This JavaScript object knows things, and can do things.
    - Since it is JavaScript, it is also very flexible.
    - You could replace the FormId or ListId or even the functions in realtime, if needed.

    ---

    # JavaScript Bundling

    ```CSharp
    public static void RegisterBundles(BundleCollection bundles) {
    bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    "~/Scripts/jquery-{version}.js",
    "~/Scripts/jquery-ui-{version}.js"));
    }
    ```

    ???

    Notice
    - JavaScript Bundles are minified when the debug flag is removed from web.config.
    - There are many nice ways to remove debug from web.config during your publish step.
    - Bundle has no extension

    Tips
    - Use more than one bundle.
    - Organize your bundles by types of pages you want to serve them on.
    - User authorization level (public, registered, admin) is a good starting point.
    # Razor Edit Partial

    ![Rate Edit Form Parital](static/img/webcon2016/addEditViewModelPartial.png)

    ???

    - TODO: Capture a screenshot of the form while on the work network.
    - TODO: Capture the generated HTML while on work network.

    ---

    # Razor Edit Partial

    ```CSharp
    @model RateCompareWeb.ViewModels.RateViewModel


    @using (Html.BeginForm())
    {
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>RateViewModel</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.LabelFor(model => model.Rate, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.Rate, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.Rate, "", new { @class = "text-danger" })
        </div>
        <!-- ... More fields ... -->
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Save" class="btn btn-default" />
        </div>
    </div>
    }

    <div> @Html.ActionLink("Back to List", "Index") </div>
    ```

    ???
    - Same basic steps to generate an HTML form and post it.
    - When you generate a form from a ViewModel, Microsoft Unobtrusive Validation (Open Source JavaScript library for client side validation) is included by default.
    - You may want to use AJAX to POST the form. You can. It works fine.

    ---

    # Razor Edit Partial

    ![Edit Form Parital](static/img/webcon2016/editrate.png)

    ---

    # Razor Edit Partial HTML

    ```HTML
    <form action="/" method="post" novalidate="novalidate">
        <input name="__RequestVerificationToken" type="hidden" value="TLeX43jnhexgznkhND0hD8aPJPfMTKomWnp1juSDchb6AFp66AuULNMlFJKTsOovQhvDPA2pErjjh-aAIcAWznX1MVnNP-06Dx5MX6gsdno1">    <div class="form-horizontal">
            <h4>Add a Rate</h4>
            <hr>
            <!-- ... More fields ... -->
            <div class="form-group">
                <label class="control-label col-md-2" for="Rate">APY</label>
                <div class="col-md-10">
                    <input class="form-control text-box single-line input-validation-error" data-val="true" data-val-number="The field APY must be a number." id="Rate" name="Rate" type="text" value="">
                    <span class="text-danger field-validation-error" data-valmsg-for="Rate" data-valmsg-replace="true"><span for="Rate" class="">The field APY must be a number.</span></span>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Save" class="btn btn-default">
                </div>
            </div>
        </div>
    </form>
    <script src="/Scripts/jquery-1.10.2.js"></script>
    <script src="/Scripts/jquery.validate.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.js"></script>
    ```

    ???

    Quick Tour
    - Razor creates HTML and JavaScript
    - CSRF Token
    - Title (Not Magic)
    - Form groups contain input box and hidden validation message.
    - Lots of data- markup.
    - Activate some JavaScript.
    - If you can write these data- attributes, Unobtrusive Validation with work with any server side technology (Django, Java, Ruby on Rails, Perl, PHP)
    - You can write these data- attributes.

    HIGHLIGHT THE UNOBTRUSIVE BEFORE SWITCHING SLIDES.

    ---

    # Unobtrusive Validation Up Close

    ```HTML
    <input class="form-control text-box single-line input-validation-error"
           data-val="true"
           data-val-number="The field APY must be a number."
           id="Rate"
           name="Rate"
           type="text"
           value="">
    <span class="text-danger field-validation-error"
          data-valmsg-for="Rate"
          data-valmsg-replace="true">
        <span for="Rate"
              class="">The field APY must be a number.</span>
    </span>
    ```

    ???

    - Unobtrusive Validaiton is Declarative
    - JS library reads the data- attributes, and binds itself to the JS events (change, click, submit)

    HOW DID RAZOR KNOW TO ADD THIS VALIDATION?

    ---

    # Validation Attribute

    ```CSharp
    public class PaymentViewModel {
    [Display(Name = "Payment Amount")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:F2}")]
    [Required(ErrorMessage = "Please supply a {0}.")]
    [DataType(DataType.Currency)]
    public decimal Amount { get; set; }
    // ...
    }
    ```

    ???
    - Validation Attribute examples
    - Required attribute
    - Data type
    - Client and server side validation is applied.
    - Most are server side, some are client side, some both.

    ---

    # Microsoft Unobtrusive Validation
    Is:
    - JavaScript
    - [Open Source](https://github.com/aspnet/jquery-ajax-unobtrusive/blob/master/LICENSE.txt)
    - [On GitHub](https://github.com/aspnet/jquery-ajax-unobtrusive)
    - Useful without ASP.Net or Razor
    - Declarative, like HTML5

    ???
    - Razor will generate the markup and include the .js reference for you.
    - No server side needed
    - Apache 2 License
    - Like HTML5 - declares desired outcome, rather than steps.
    - Try it with Django, Rails, WordPress, Drupal or Node.js
    - Available in NuGet and Bower

    ---
    # Microsoft Unobtrusive Validation

    ```HTML
    <input id="ZipCode" name="ZipCode" type="text" value="" maxlength="10"
           data-val="true"
           data-val-required="A Postal Code is required."
           data-val-length="A 5 or 10 digit Postal Code is required."
           data-val-length-max="10"
           data-val-length-min="5"
           data-val-regex="The Postal Code is not formatted properly."
           data-val-regex-pattern="^\d{5}(-?(\d{4}))?$">
    ```

    ???
    - Razor can generate data-val-* or you can write it.
    - Notice that we have three built-in validators here:
    - required, length, regex

    ---
    # Microsoft Unobtrusive Validation - jQuery Validators
    [JQuery Validation](https://github.com/jzaefferer/jquery-validation/) Example
    ```JavaScript
    $.validator.addMethod("validatezipcode",
    function (value, element, param) {
    if (!(new RegExp(/^\d{5}(-?\d{4})?$/)).test(value))
    {
    return false;
    }
    return true;
    }
    );
    jQuery.validator.unobtrusive.adapters.addBool("validatezipcode");
    ```

    ```HTML
    <input id="search_zip"
           data-val="true"
           data-val-validatezipcode="Enter 5 or 9 digits of the Postal Code." />
    ```
    ???
    - Unobtrusive validators are jQuery validation validators
    - $.validator.addMethod
    - jQuery.validator.unobtrusive.adapters.addBool("validatezipcode");

    ---
    # Using Unobtrusive with React.js and other Dynamic Page Content
    ```JavaScript
    $.validator.unobtrusive.parse("#EditForm");
    ```

    ???
    - Unobtrusive will parse the page once when the library loads.
    - If scripts dynamically add or remove data-val-* attributes, use this snippet after.
    - Note that React.JS continuously rewrites the page to save memory.
    - You may need this snippet in .render for certain React.JS components that use unobtrusive validation.

    ---

    # Submit Form with AJAX

    ```JavaScript
    $("#editForm").on("submit", function (event) {
    // Prevent HTML POST
    if(event) event.preventDefault();
    // Get values from form
    fields = {};
    $("#editFormId").find("input[type=text],input[type=hidden]").map(function (id, item) {
    fields[item.id] = item.value;
    });
    // ... Do clever user-friendly things here...
    // Submit AJAX POST
    $.post("api/thing/", fields, function ( post_response, status ) {
    $("#result").html(post_response);
    });
    });
    ````

    ???
    - Bind to JavaScript submit event - captures submit button, Enter key, other JavaScript posting the form.
    - Prevent page reload.
    - Test in Firefox - it works, but it can be sensitive.
    - jQuery .find to find fields.
    - jQuery .map to update dictionary for each field.
    - jQuery .post to submit the form.
    - jQuery .html to paste the response HTML right into our output status field.
    - Whole update without a page reload.

    ---
    # JSX Example

    ```HTML
    <h2>Do These Today</h2>
    <div id='todayActions' />
    ```
    ```JS
    React.render(
    <ActionList title="Today's Actions" api="api/actions/today" />
    ,document.getElementById('ActionList')
    );
    ```

    ???

    - ActionList.setState calls ActionList.render.
    - Multiple calls to setState will render only once.

    ---

    # ReactComponent.jsx - JSX Example
    ```JSX
    var ActionList = React.createClass({
    getInitialState: function() {
    return {actions: []};
    },
    refresh: function() {
    $.get(this.props.url, function (data) {
    this.setState(data);
    }.bind(this));
    }.bind(this),
    render: function()
    {
    actions = this.state.actions.map(function (item) {
    return (
    <Action ref_parent={this.refresh} id={item.id} key={item.id} data={item} />
    );
    }.bind(this));
    return (
    <table className="table">
        <thead>
        <th>{this.props.title}</th>
        </thead>
        <tbody>
            {actions}
        </tbody>
    </table>
    );
    }
    });
    ```

    ???
    Cool stuff
    - React components can be Composed of other React components.
    - props are set in the HTML attributes
    - state is set at runtime
    Weird stuff
    - Put each JSX file into both ReactConfig.cs and BundleConfig.cs
    - ReactConfig.cs to allow ReactJS.Net to server side pre-render for speed.
    - BundleConfig.cs to allow MVC to minify the React.JS JavaScript in production.
    - Use className instead of class
    - .bind(this) to call setState on the outer object.
    - ReactJS.Net will call render and getInitialState sever side.
    - Keep render and getInitialState as empty as you can.

    ---

    # Alternative to JSX
    Reload the partial with JQuery.
    ```JavaScript
    $.get("/PropertyManager/_PropertyList", function (html) {
    $("#PropertyList").html(html);
    }
    ```

    ???

    - Rendering stays server side.
    - Still avoids page reload.
    - Still works with Single Page App
    - Eliminates the need to alternate between Razor and JSX for form layout.
    - No surprises during Server side pre-render, as with JSX.
    - Benefits fully from ViewModel Attributes and ViewBag

    More misc notes:
    # ViewModel.cs
    # View.cs
    # _PartialView.cs
    # Scripts/UserExperience.js

    - User experience is important.
    - User experience belongs as close to the user as possible, so it goes in the JavaScript.
    - Think of Razor View as Initial View.
    - JavaScript takes over.
    - But! Getting it right on the first try still has value.
    - JavaScript increases accessibility, by improving user experience.
    - JavaScript is no longer a significant source of vulnerability.
    - Tell your paranoid friends they can turn it back on.
    - Tell them to update their browser first.

    ---
    # Conclusions
    - Build common needs fast in ASP.Net MVC.
    - ...even if you want Single Page Application!
    - React.js integration with MVC is good.
    - Razor Partials can replace many React.js use cases.
    - jQuery Unobtrusive Validation is terrific.
    - ...whether you use Microsoft stack or not!
    - Render (most) HTML server side.

    - "Cool URIs don't change." (Tim Berner's Lee, _Weaving the Web_, 1999)

    ???

    - URL = URI
    - People like to bookmark things.
    - URL should reflect purpose.
    - New thing? New purpose? New URL.
    - Redirects are a thing. Use them.
    - Online article: [W3.org Style Guide - Cool URIs don't change](https://www.w3.org/Provider/Style/URI.html)

    ---


    ---
    # Microsoft Resources
    - [Microsoft Resources for SPA](http://www.asp.net/single-page-application)
    - [ASP.Net](http://www.asp.net/web-pages) [which is Open Source](https://github.com/aspnet)
    - [Model View Controller](http://www.asp.net/mvc)
    - [NuGet Gallery](https://www.nuget.org/packages)
    - [Entity Framework](http://www.asp.net/entity-framework)

    # JavaScript Resources
    - [JQuery Validation](https://github.com/jzaefferer/jquery-validation/)
    - [Unobtrusive Validation](https://github.com/aspnet/jquery-ajax-unobtrusive)

    ---

    # About Us
    - Contact Info: [Edward.Delaporte@Busey.com](mailto:edward.delaporte@busey.com)
    - Download Slides: http://edward.delaporte.us/WebCon2016.html

    ???

    - [JavaScript Slide Deck with ReMark](https://gnab.github.io/remark)

    Add links to Linq, etc.

    Maybe add a link to further reading about Entity Framework and Linq on last page...
    Maybe talk briefly about NuGet and have a screenshot or two...

</textarea>
    <!--<script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">-->
    <script src="static/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
